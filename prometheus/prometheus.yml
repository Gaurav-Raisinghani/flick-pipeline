global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'api-gateway'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['api-gateway:8080']
        labels:
          region: 'us-east'
      - targets: ['api-gateway-region-b:8080']
        labels:
          region: 'us-west'

  - job_name: 'worker-text'
    metrics_path: '/actuator/prometheus'
    dns_sd_configs:
      - names: ['worker-text']
        type: A
        port: 8081

  - job_name: 'worker-image'
    metrics_path: '/actuator/prometheus'
    dns_sd_configs:
      - names: ['worker-image']
        type: A
        port: 8081

  - job_name: 'worker-video'
    metrics_path: '/actuator/prometheus'
    dns_sd_configs:
      - names: ['worker-video']
        type: A
        port: 8081

  - job_name: 'autoscaler'
    metrics_path: '/actuator/prometheus'
    static_configs:
      - targets: ['autoscaler:8082']

  - job_name: 'rabbitmq'
    static_configs:
      - targets: ['rabbitmq:15692']
